<div class="container-fluid p-0 div-dashboard">   
    
</div>
        <script src="~/assets/plugins/jquery/jquery.min.js"></script>
        <script src="~/Scripts/APIController.js"></script>
        <script src="~/Scripts/dashboardWorker.js"></script>
        <script src="~/Scripts/WorkerValidation.js"></script>
        <script>
            $(document).ready(function () {
                $(".container-fluid").empty();
                let username = $("#username").html();
                let config = JSON.parse(localStorage.getItem('configdefault' + username));
                if (config == undefined) return;

                if (config.RoleId == ROLE_SISTEMAS) {
                    renderDashboardSystem();
                } else if (config.RoleId == ROLE_MEDICO) {
                    renderDashboardDoctor();
                } else if (config.RoleId == ROLE_RECEPCION) {
                    renderDashboardReservationDesk();
                } else if (config.RoleId == ROLE_GERENCIA) {
                    renderDashboardManagement();
                } else if (config.RoleId == ROLE_COMERCIAL) {
                    renderDashboardCommercial();
                } else if (config.RoleId == ROLE_ADMNISTRADOR) {
                    renderDashboardAdministrator();
                } else if (config.RoleId == ROLE_CLIENTE) {
                    renderDashboardCustomer();
                } else if (config.RoleId == ROLE_TRABAJADOR) {
                    DashboardWorker();
                }     

                
                $('.container-fluid').on('click', '#btnUpdateDataWorker', function (event) {
                    if (ValidateWorkerData(event)) {
                    let data = {
                        "WorkerId": $("#workerIdhidden").val(),
                        "PersonId": $("#personIdhidden").val(),
                        "FirstName": $("#txtFirstName").val(),
                        "FirstLastName": $("#txtFirstLastName").val(),
                        "SecondLastName": $("#txtSecondLastName").val(),
                        "NroDocument": $("#txtNroDocument").val(),                         
                        "GenderId": $("#select-gender-Worker option:selected").val(),                         
                        "DateOfBirth": $("#dpt-DateOfBirth").val(),  
                        "Email": $("#txtEmail").val(),            
                        "MobileNumber": $("#txtMobileNumber").val(),            
                        "HomeAddress": $("#txtHomeAddress").val(),            
                        "CurrentPosition": $("#txtCurrentPosition").val(),                                 
                     }
                    
                    swal({
                          title: "¿Está seguro de actualizar los datos?",
                          text: "Revise correctamente antes de grabar",
                          type: "info",
                          showCancelButton: true,
                          closeOnConfirm: false,
                          showLoaderOnConfirm: true
                        }, function () {
                            APIController.UpdateWorkerData(data).then((res) => {
                                 swal("Registro Actualizado");
                            });                            
                        });      
                    }
                    
                 });

            });

            function renderDashboardSystem() {

            }

            function renderDashboardDoctor() {

            }

            function renderDashboardReservationDesk() {

            }

            function renderDashboardManagement() {

            }

            function renderDashboardCommercial() {

                let content = "";

                content += "<div class='row'>";
                content += "<div id='chart1' class='col-12'></div>";
                content += "</div>";

                content += "<div class='row p-4'>";
                content += "<div id='chart2' class='col-md-6'>";

                content += "</div>";
                content += "<div id='chart3' class='col-md-6'>";

                content += "</div>";

                content += "</div>";

                content += "<div class='row p-4'>";
                content += "<div id='chart4' class='col-md-6'>";

                content += "</div>";
                content += "</div>";

                $(".container-fluid").append(content);

                Highcharts.chart('chart1', {

                    title: {
                        text: 'Solar Employment Growth by Sector, 2010-2016'
                    },

                    subtitle: {
                        text: 'Source: thesolarfoundation.com'
                    },

                    yAxis: {
                        title: {
                            text: 'Number of Employees'
                        }
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'middle'
                    },

                    plotOptions: {
                        series: {
                            label: {
                                connectorAllowed: false
                            },
                            pointStart: 2010
                        }
                    },

                    series: [{
                        name: 'Installation',
                        data: [43934, 52503, 57177, 69658, 97031, 119931, 137133, 154175]
                    }, {
                        name: 'Manufacturing',
                        data: [24916, 24064, 29742, 29851, 32490, 30282, 38121, 40434]
                    }, {
                        name: 'Sales & Distribution',
                        data: [11744, 17722, 16005, 19771, 20185, 24377, 32147, 39387]
                    }, {
                        name: 'Project Development',
                        data: [null, null, 7988, 12169, 15112, 22452, 34400, 34227]
                    }, {
                        name: 'Other',
                        data: [12908, 5948, 8105, 11248, 8989, 11816, 18274, 18111]
                    }],

                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 500
                            },
                            chartOptions: {
                                legend: {
                                    layout: 'horizontal',
                                    align: 'center',
                                    verticalAlign: 'bottom'
                                }
                            }
                        }]
                    }

                });

                Highcharts.chart('chart2', {
                    title: {
                        text: 'Combination chart'
                    },
                    xAxis: {
                        categories: ['Apples', 'Oranges', 'Pears', 'Bananas', 'Plums']
                    },
                    labels: {
                        items: [{
                            html: 'Total fruit consumption',
                            style: {
                                left: '50px',
                                top: '18px',
                                color: ( // theme
                                    Highcharts.defaultOptions.title.style &&
                                    Highcharts.defaultOptions.title.style.color
                                ) || 'black'
                            }
                        }]
                    },
                    series: [{
                        type: 'column',
                        name: 'Jane',
                        data: [3, 2, 1, 3, 4]
                    }, {
                        type: 'column',
                        name: 'John',
                        data: [2, 3, 5, 7, 6]
                    }, {
                        type: 'column',
                        name: 'Joe',
                        data: [4, 3, 3, 9, 0]
                    }, {
                        type: 'spline',
                        name: 'Average',
                        data: [3, 2.67, 3, 6.33, 3.33],
                        marker: {
                            lineWidth: 2,
                            lineColor: Highcharts.getOptions().colors[3],
                            fillColor: 'white'
                        }
                    }, {
                        type: 'pie',
                        name: 'Total consumption',
                        data: [{
                            name: 'Jane',
                            y: 13,
                            color: Highcharts.getOptions().colors[0] // Jane's color
                        }, {
                            name: 'John',
                            y: 23,
                            color: Highcharts.getOptions().colors[1] // John's color
                        }, {
                            name: 'Joe',
                            y: 19,
                            color: Highcharts.getOptions().colors[2] // Joe's color
                        }],
                        center: [100, 80],
                        size: 100,
                        showInLegend: false,
                        dataLabels: {
                            enabled: false
                        }
                    }]
                });

                Highcharts.chart('chart3', {
                    chart: {
                        type: 'area'
                    },
                    title: {
                        text: 'Historic and Estimated Worldwide Population Growth by Region'
                    },
                    subtitle: {
                        text: 'Source: Wikipedia.org'
                    },
                    xAxis: {
                        categories: ['1750', '1800', '1850', '1900', '1950', '1999', '2050'],
                        tickmarkPlacement: 'on',
                        title: {
                            enabled: false
                        }
                    },
                    yAxis: {
                        title: {
                            text: 'Billions'
                        },
                        labels: {
                            formatter: function () {
                                return this.value / 1000;
                            }
                        }
                    },
                    tooltip: {
                        split: true,
                        valueSuffix: ' millions'
                    },
                    plotOptions: {
                        area: {
                            stacking: 'normal',
                            lineColor: '#666666',
                            lineWidth: 1,
                            marker: {
                                lineWidth: 1,
                                lineColor: '#666666'
                            }
                        }
                    },
                    series: [{
                        name: 'Asia',
                        data: [502, 635, 809, 947, 1402, 3634, 5268]
                    }, {
                        name: 'Africa',
                        data: [106, 107, 111, 133, 221, 767, 1766]
                    }, {
                        name: 'Europe',
                        data: [163, 203, 276, 408, 547, 729, 628]
                    }, {
                        name: 'America',
                        data: [18, 31, 54, 156, 339, 818, 1201]
                    }, {
                        name: 'Oceania',
                        data: [2, 2, 2, 6, 13, 30, 46]
                    }]
                });

                Highcharts.chart('chart4', {
                    chart: {
                        type: 'column',
                        options3d: {
                            enabled: true,
                            alpha: 15,
                            beta: 15,
                            viewDistance: 25,
                            depth: 40
                        }
                    },

                    title: {
                        text: 'Total fruit consumption, grouped by gender'
                    },

                    xAxis: {
                        categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas'],
                        labels: {
                            skew3d: true,
                            style: {
                                fontSize: '16px'
                            }
                        }
                    },

                    yAxis: {
                        allowDecimals: false,
                        min: 0,
                        title: {
                            text: 'Number of fruits',
                            skew3d: true
                        }
                    },

                    tooltip: {
                        headerFormat: '<b>{point.key}</b><br>',
                        pointFormat: '<span style="color:{series.color}">\u25CF</span> {series.name}: {point.y} / {point.stackTotal}'
                    },

                    plotOptions: {
                        column: {
                            stacking: 'normal',
                            depth: 40
                        }
                    },

                    series: [{
                        name: 'John',
                        data: [5, 3, 4, 7, 2],
                        stack: 'male'
                    }, {
                        name: 'Joe',
                        data: [3, 4, 4, 2, 5],
                        stack: 'male'
                    }, {
                        name: 'Jane',
                        data: [2, 5, 6, 2, 1],
                        stack: 'female'
                    }, {
                        name: 'Janet',
                        data: [3, 0, 4, 4, 3],
                        stack: 'female'
                    }]
                });

            }

            function renderDashboardAdministrator() {

            }

            function renderDashboardCustomer() {
                let content = "";

                content += "<div class='row p-2'>";
                content += "<h1>Dashboard de Cliente</h1>";
                content += "</div>";

                $(".container-fluid").append(content);
            }

            function DashboardWorker() {
                APIController.GetWorkerData().then((res) => {                    
                    let content = renderDashboardWorker(res.Data);                    
                    $(".container-fluid").append(content);    
                    //transform controls------------------------------------------                    
                    $("#dpt-DateOfBirth").datepicker({ dateFormat: 'dd-mm-yy' });
                    let datebirth = formatDateForCalendar(res.Data.DateOfBirth);                   
                    $("#dpt-DateOfBirth").val(datebirth);
                    //set gender--------------------------------------------------
                    let genderId = res.Data.GenderId;
                     $('#select-gender-Worker option[value='+genderId+']').attr('selected', 'selected');
                });
            }

        </script>
